{"ast":null,"code":"export const handleDeletePost=async(postId,posts,post,user,setPosts)=>{const postToEdit=posts.find(post=>post._id===postId);if((user===null||user===void 0?void 0:user._id)===(postToEdit===null||postToEdit===void 0?void 0:postToEdit.user._id)){try{//const response = await fetch(`http://localhost:3500/posts/${postId}`, {\nconst response=await fetch(\"/posts/\".concat(postId),{method:'DELETE',headers:{'Content-type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});const data=await response.json();console.log(data);if(response.ok){setPosts(posts.filter(post=>post._id!==postId));}}catch(error){console.log(error);}}else{alert('You can only delete posts that you created.');}};","map":{"version":3,"names":["handleDeletePost","postId","posts","post","user","setPosts","postToEdit","find","_id","response","fetch","concat","method","headers","Authorization","localStorage","getItem","data","json","console","log","ok","filter","error","alert"],"sources":["E:/REACT-DOCKER-SEP2024/MERN TO AWS/EC2/REACT NOTE CRUD/reactNoteCrudAWSEC2-frontend/src/services/Home/serviceHandleDeletePost.ts"],"sourcesContent":["import { IPost } from '../../interface/IPost';\n\nexport const handleDeletePost = async (\n  postId: string,\n  posts: IPost[],\n  post: IPost,\n  user: any,\n  setPosts: any,\n) => {\n  const postToEdit = posts.find((post: IPost) => post._id === postId);\n  if (user?._id === postToEdit?.user._id) {\n    try {\n      //const response = await fetch(`http://localhost:3500/posts/${postId}`, {\n      const response = await fetch(`/posts/${postId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-type': 'application/json',\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n        },\n      });\n\n      const data = await response.json();\n      console.log(data);\n      if (response.ok) {\n        setPosts(posts.filter((post) => post._id !== postId));\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  } else {\n    alert('You can only delete posts that you created.');\n  }\n};\n"],"mappings":"AAEA,MAAO,MAAM,CAAAA,gBAAgB,CAAG,KAAAA,CAC9BC,MAAc,CACdC,KAAc,CACdC,IAAW,CACXC,IAAS,CACTC,QAAa,GACV,CACH,KAAM,CAAAC,UAAU,CAAGJ,KAAK,CAACK,IAAI,CAAEJ,IAAW,EAAKA,IAAI,CAACK,GAAG,GAAKP,MAAM,CAAC,CACnE,GAAI,CAAAG,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEI,GAAG,KAAKF,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEF,IAAI,CAACI,GAAG,EAAE,CACtC,GAAI,CACF;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,WAAAC,MAAA,CAAWV,MAAM,EAAI,CAC/CW,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,WAAAH,MAAA,CAAYI,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACxD,CACF,CAAC,CAAC,CAEF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAClCC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC,CACjB,GAAIR,QAAQ,CAACY,EAAE,CAAE,CACfhB,QAAQ,CAACH,KAAK,CAACoB,MAAM,CAAEnB,IAAI,EAAKA,IAAI,CAACK,GAAG,GAAKP,MAAM,CAAC,CAAC,CACvD,CACF,CAAE,MAAOsB,KAAK,CAAE,CACdJ,OAAO,CAACC,GAAG,CAACG,KAAK,CAAC,CACpB,CACF,CAAC,IAAM,CACLC,KAAK,CAAC,6CAA6C,CAAC,CACtD,CACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}