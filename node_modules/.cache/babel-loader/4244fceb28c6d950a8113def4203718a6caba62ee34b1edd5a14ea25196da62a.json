{"ast":null,"code":"export const handleDeletePost=async(postId,posts,post,user,setPosts)=>{const postToEdit=posts.find(post=>post._id===postId);alert('process.env.REACT_API_SERVER_URL}/posts/${postId}: '+\"\".concat(process.env.REACT_APP_API_SERVER_URL,\"/posts/\").concat(postId));alert('user?._id: '+(user===null||user===void 0?void 0:user._id));alert('postToEdit?.user._id: '+(postToEdit===null||postToEdit===void 0?void 0:postToEdit.user._id));if((user===null||user===void 0?void 0:user._id)===(postToEdit===null||postToEdit===void 0?void 0:postToEdit.user._id)){try{//const response = await fetch(`http://localhost:3500/posts/${postId}`, {\nconst response=await fetch(\"\".concat(process.env.REACT_APP_API_SERVER_URL,\"/posts/\").concat(postId),{method:'DELETE',headers:{'Content-type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});const data=await response.json();console.log(data);if(response.ok){setPosts(posts.filter(post=>post._id!==postId));}}catch(error){console.log(error);}}else{alert('You can only delete posts that you created.');}};","map":{"version":3,"names":["handleDeletePost","postId","posts","post","user","setPosts","postToEdit","find","_id","alert","concat","process","env","REACT_APP_API_SERVER_URL","response","fetch","method","headers","Authorization","localStorage","getItem","data","json","console","log","ok","filter","error"],"sources":["E:/REACT-DOCKER-SEP2024/MERN TO AWS/EC2/REACT NOTE CRUD/reactNoteCrudAWSEC2-frontend/src/services/Home/serviceHandleDeletePost.ts"],"sourcesContent":["import { IPost } from '../../interface/IPost';\n\nexport const handleDeletePost = async (\n  postId: string,\n  posts: IPost[],\n  post: IPost,\n  user: any,\n  setPosts: any,\n) => {\n  const postToEdit = posts.find((post: IPost) => post._id === postId);\n  alert(\n    'process.env.REACT_API_SERVER_URL}/posts/${postId}: ' +\n      `${process.env.REACT_APP_API_SERVER_URL}/posts/${postId}`,\n  );\n  alert('user?._id: ' + user?._id);\n  alert('postToEdit?.user._id: ' + postToEdit?.user._id);\n  if (user?._id === postToEdit?.user._id) {\n    try {\n      //const response = await fetch(`http://localhost:3500/posts/${postId}`, {\n      const response = await fetch(`${process.env.REACT_APP_API_SERVER_URL}/posts/${postId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-type': 'application/json',\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n        },\n      });\n\n      const data = await response.json();\n      console.log(data);\n      if (response.ok) {\n        setPosts(posts.filter((post) => post._id !== postId));\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  } else {\n    alert('You can only delete posts that you created.');\n  }\n};\n"],"mappings":"AAEA,MAAO,MAAM,CAAAA,gBAAgB,CAAG,KAAAA,CAC9BC,MAAc,CACdC,KAAc,CACdC,IAAW,CACXC,IAAS,CACTC,QAAa,GACV,CACH,KAAM,CAAAC,UAAU,CAAGJ,KAAK,CAACK,IAAI,CAAEJ,IAAW,EAAKA,IAAI,CAACK,GAAG,GAAKP,MAAM,CAAC,CACnEQ,KAAK,CACH,qDAAqD,IAAAC,MAAA,CAChDC,OAAO,CAACC,GAAG,CAACC,wBAAwB,YAAAH,MAAA,CAAUT,MAAM,CAC3D,CAAC,CACDQ,KAAK,CAAC,aAAa,EAAGL,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEI,GAAG,EAAC,CAChCC,KAAK,CAAC,wBAAwB,EAAGH,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEF,IAAI,CAACI,GAAG,EAAC,CACtD,GAAI,CAAAJ,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEI,GAAG,KAAKF,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEF,IAAI,CAACI,GAAG,EAAE,CACtC,GAAI,CACF;AACA,KAAM,CAAAM,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAL,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,wBAAwB,YAAAH,MAAA,CAAUT,MAAM,EAAI,CACtFe,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,WAAAR,MAAA,CAAYS,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACxD,CACF,CAAC,CAAC,CAEF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClCC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC,CACjB,GAAIP,QAAQ,CAACW,EAAE,CAAE,CACfpB,QAAQ,CAACH,KAAK,CAACwB,MAAM,CAAEvB,IAAI,EAAKA,IAAI,CAACK,GAAG,GAAKP,MAAM,CAAC,CAAC,CACvD,CACF,CAAE,MAAO0B,KAAK,CAAE,CACdJ,OAAO,CAACC,GAAG,CAACG,KAAK,CAAC,CACpB,CACF,CAAC,IAAM,CACLlB,KAAK,CAAC,6CAA6C,CAAC,CACtD,CACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}